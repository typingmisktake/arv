<div class="container flex flex-col items-center gap-3 mx-auto">
  <div class="p-8 bg-slate-800 drop-shadow-2xl">
    <h1 class="my-2 text-3xl text-white">Admission Form</h1>
    <form [formGroup]="admissionForm">
      <fieldset class="p-5 my-3 border-2" formGroupName="name">
        <legend class="text-xl text-white">Name</legend>
        <div class="flex items-start gap-2 mb-2">
          <div class="w-1/3">
            <input
              type="text"
              formControlName="first"
              placeholder="First Name"
              class="w-full px-4 py-2"
            />
            <app-error-message
              [field]="field('name.first')"
              fieldName="First Name"
            ></app-error-message>
          </div>
          <div class="w-1/3">
            <input
              type="text"
              formControlName="middle"
              placeholder="Middle Name"
              class="w-full px-4 py-2"
            />
            <app-error-message
              [field]="field('name.middle')"
              fieldName="Middle Name"
            ></app-error-message>
          </div>
          <div class="w-1/3">
            <input
              type="text"
              formControlName="last"
              placeholder="Last Name"
              class="w-full px-4 py-2"
            />
            <app-error-message
              [field]="field('name.last')"
              fieldName="Last Name"
            ></app-error-message>
          </div>
        </div>
      </fieldset>
      <div class="flex gap-2 px-5">
        <input
          type="text"
          formControlName="placeOfBirth"
          placeholder="Place of Birth"
          class="w-1/3 px-4 py-2"
        />
        <div class="flex items-center justify-between w-1/3 gap-2 bg-white">
          <span
            class="px-4 py-2 m-0 text-white whitespace-nowrap from-sky-400 bg-gradient-to-b to-sky-500"
            >DOB</span
          >
          <input
            type="date"
            formControlName="dateOfBirth"
            class="w-full mr-1 text-black bg-transparent"
          />
          <app-error-message
            [field]="field('dateOfBirth')"
            fieldName="Date of Birth"
          ></app-error-message>
        </div>
        <input
          type="text"
          formControlName="firstLanguage"
          placeholder="First Language"
          class="w-1/3 px-4 py-2"
        />
      </div>
      <fieldset class="p-5 my-3 border-2" formGroupName="address">
        <legend class="text-xl text-white">Address</legend>
        <div class="flex flex-col gap-2">
          <div class="flex gap-2">
            <input
              type="text"
              formControlName="city"
              placeholder="City"
              class="w-1/2 px-4 py-2"
            />
            <input
              type="text"
              formControlName="state"
              placeholder="State"
              class="w-1/2 px-4 py-2"
            />
          </div>
          <div class="flex gap-2">
            <input
              type=" text"
              formControlName="country"
              placeholder="Country"
              class="w-1/2 px-4 py-2"
            />
            <input
              type="text"
              formControlName="pin"
              placeholder="Pin"
              class="w-1/2 px-4 py-2"
            />
          </div>
        </div>
      </fieldset>

      <fieldset class="p-5 my-3 border-2" formGroupName="father">
        <legend class="text-xl text-white">Father</legend>
        <fieldset class="mb-3" formGroupName="name">
          <legend class="p-2 text-lg text-white">Name</legend>
          <div class="flex gap-2 items-start">
            <div class="w-1/3">
              <input
                type="text"
                formControlName="first"
                placeholder="First Name"
                class="w-full px-4 py-2"
              />
              <app-error-message
                [field]="field('father.name.first')"
                fieldName="First Name"
              ></app-error-message>
            </div>
            <div class="w-1/3">
              <input
                type="text"
                formControlName="middle"
                placeholder="Middle Name"
                class="w-full px-4 py-2"
              />
              <app-error-message
                [field]="field('father.name.middle')"
                fieldName="Middle Name"
              ></app-error-message>
            </div>
            <div class="w-1/3">
              <input
                type="text"
                formControlName="last"
                placeholder="Last Name"
                class="w-full px-4 py-2"
              />
              <app-error-message
                [field]="field('father.name.last')"
                fieldName="Last Name"
              ></app-error-message>
            </div>
          </div>
        </fieldset>
        <fieldset class="text-lg" formGroupName="education">
          <legend class="text-white">Education</legend>
          <div class="grid grid-cols-3 gap-2">
            <div
              *ngFor="
                let item of educationFormArray('father').controls;
                let i = index
              "
              class=""
            >
              <div class="flex">
                <input
                  type="text"
                  [formControlName]="i"
                  placeholder="Education..."
                  class="w-full px-4 py-2"
                />
                <button
                  (click)="removeEducation('father', i)"
                  class="bg-rose-500 text-white px-4 py-2"
                >
                  X
                </button>
              </div>
              <app-error-message
                [field]="getFormControl(item)"
              ></app-error-message>
            </div>
            <button
              class="px-4 py-2 text-white bg-gradient-to-b from-sky-400 to-sky-500"
              (click)="addEducation(true)"
            >
              Add
              <span class="">&plus;</span>
            </button>
          </div>
        </fieldset>
        <div class="pt-3 pb-2">
          <div class="flex gap-2 mb-2">
            <input
              type="text"
              formControlName="qualification"
              placeholder="Qualification"
              class="w-1/2 px-4 py-2"
            />
            <input
              type="text"
              formControlName="profession"
              placeholder="Profession"
              class="w-1/2 px-4 py-2"
            />
          </div>
          <div class="flex gap-2">
            <input
              type="text"
              formControlName="designation"
              placeholder="Designation"
              class="w-1/2 px-4 py-2"
            />
            <input
              type="number"
              formControlName="phone"
              placeholder="Phone"
              class="w-1/2 px-4 py-2"
            />
          </div>
        </div>
      </fieldset>
      <fieldset class="p-5 my-3 border-2" formGroupName="mother">
        <legend class="text-xl text-white">Mother</legend>
        <fieldset class="mb-3" formGroupName="name">
          <legend class="p-2 text-lg text-white">Name</legend>
          <div class="flex gap-2">
            <input
              type="text"
              formControlName="first"
              placeholder="First Name"
              class="w-1/3 px-4 py-2"
            />
            <input
              type="text"
              formControlName="middle"
              placeholder="Middle Name"
              class="w-1/3 px-4 py-2"
            />
            <input
              type="text"
              formControlName="last"
              placeholder="Last Name"
              class="w-1/3 px-4 py-2"
            />
          </div>
        </fieldset>
        <fieldset class="text-lg" formGroupName="education">
          <legend class="text-white">Education</legend>
          <div class="grid grid-cols-3 gap-2">
            <div
              *ngFor="
                let item of educationFormArray('mother').controls;
                let i = index
              "
              class="flex"
            >
              <input
                type="text"
                [formControlName]="i"
                placeholder="Education..."
                class="w-full px-4 py-2"
              />
              <button
                (click)="removeEducation('mother', i)"
                class="bg-rose-500 text-white px-4 py-2"
              >
                X
              </button>
            </div>
            <button
              class="px-4 py-2 text-white bg-gradient-to-b from-sky-400 to-sky-500"
              (click)="addEducation(true)"
            >
              Add
              <span class="">&plus;</span>
            </button>
          </div>
        </fieldset>
        <div class="pt-3 pb-2">
          <div class="flex gap-2 mb-2">
            <input
              type="text"
              formControlName="qualification"
              placeholder="Qualification"
              class="w-1/2 px-4 py-2"
            />
            <input
              type="text"
              formControlName="profession"
              placeholder="Profession"
              class="w-1/2 px-4 py-2"
            />
          </div>
          <div class="flex gap-2">
            <input
              type="text"
              formControlName="designation"
              placeholder="Designation"
              class="w-1/2 px-4 py-2"
            />
            <input
              type="number"
              formControlName="phone"
              placeholder="Phone"
              class="w-1/2 px-4 py-2"
            />
          </div>
        </div>
      </fieldset>
      <button
        (click)="handleSubmit()"
        class="bg-emerald-500 px-4 py-2 text-white disabled:opacity-75"
        [disabled]="!this.admissionForm.valid"
      >
        Submit
      </button>
      <button type="button" (click)="fillForm()">Fill Form</button>
    </form>
    <div class="mt-5 text-white" *ngIf="applications.length > 0">
      <h1 class="text-5xl text-center my-5">Applications</h1>
      <app-display [applications]="applications"></app-display>
    </div>
  </div>

  {{ admissionForm.value | json }} <br />
  Status: {{ admissionForm.status }}
</div>
